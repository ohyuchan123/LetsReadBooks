# 1. 계층 구조

통신 기능은 상당히 복잡한 요구사항들을 만족해야 하기 때문에 단일 기능 모듈로 설계하기는 너무 복잡합니다.  
일반적인 공학설계에서 복잡한 시스템 설계를 설계할 때 다수의 작은 기능을 나누어서 설계하는 것이 복잡도를 낮추고,  
설계 구현, 오류 수정, 유지 보스 등을 용이하게 합니다.

이와 동일한 원리로 컴퓨터 하드웨어나 소프트웨어의 설계에서도 복잡한 시스템을 보다 단순한 독립적인 기능 모듈로 나누어  
설계 및 구현합니다. 프로토콜의 기능도 동일한 원리로 다수의 기능 모듈로 나누어 설계 되었습니다.

다른 기능 모듈과의 상호 작용을 **인터페이스** 라고 합니다.

## 1.1 계층 구조의 장점

- 다수의 계층으로 모듈화 함으로써 복잡도가 낮아지고, 결과적으로 시스템 설계 및 구현이 용이해진다.
- 각 계층의 기능은 정해진 인터페이스에 대한 규칙만 따르면 다른 계층과는 독립적으로 수정되거나 버전 변경이 가능해집니다.
- 송신 측과 수신 측에서 프로토콜은 대칭이므로 동일 계층에서 프로토콜이 단순화됩니다.

## 1.2 서비스 프리미티브

**서비스 프리미티브(service primitive)** 는 인터페이스를 통해서 이루어지는 계층 사이의 상호작용을 추상화하여 단순한 모습으로  
제공하기 위한 서비스 단위 입니다.

상위 계층은 하위 계층에게 서비스를 요구하고 하위 계층은 상위 계층에게 서비스를 제공하는 계층입니다.  
인터페이스가 추상적이라는 것의 의미는 시스템의 서비스를 사용자에게 나타낼 때 내부의 복잡한 모습은 감추고 단순화 시켜서 나타냄을 말합니다.

서비스 프리미티브에는 `request`, `indication`, `response`, `confirm` 등의 4가지가 있습니다.  
두 A, B 호스트 사이에서 A 호스트 사용자가 B 호스트 사용자에게 서비스를 요청하는 것이 `request`이고,  
이 요청이 하위 계층에 의하여 B 호스트까지 전달되어 사용자에게 알리는 것이 `indication`입니다.

B 호스트 사용자가 요청을 처리하여 응답을 보내는 것을 `response`라 하고, 이것이 하위 계층에 의하여 A 호스트로  
전달되어 서비스를 요청했던 사용자에게 알리는 것을 `confirm`이라 합니다.

# 2. OSI 참조 모델

국제표준화기구인 ISO(International Standards Organization)에서는 서로 다른 기종간의 데이터 통신을 위해서 **OSI(Open System Interconnection) 7계층 모델을**  
제안했습니다. OSI 계층 모델은 구조측명에서는 매우 논리적이지만 **산업계에서는 사용되지 않았고, 통신 네트워크나 프로토콜 연구자들에 의해서 참조되는 모델로 남게되었습니다.**

1. 1계층 물리(Physical) 계층 : 물리적인 회선 상에서 신호 전달을 통한 비트(bit) 전송 **[통신 케이블, 리피터, 허브, 커넥터, 트랜시버, 탭]**
2. 2계층 데이터 링크(Data Link) 계층 : 이웃한 노드 간에 비트 열로 이루어진 프레임(frame) 전송 **[브리지, 스위치, 이더넷]**
3. 3계층 네트워크(Netwrok) 계층 : 송신 노드에서 수신 노드까지 경로 설정(routing)과 패킷(packet) 전달 **[라우터]**
4. 4계층 전송(Trasport) 계층 : 송신 노드의 프로세스에서 수신 노드의 프로세스까지 신뢰성 있는 데이터 세그먼트(segment) 전달 **[TCP, UDP]**
5. 5계층 세션(Session) 계층 : 통신 서비스 내에서 논리적인 단위 관리, 대화 관리, 동기점을 이용한 회복 기능 **[API, socket]**
6. 6계층 표현(Presentation) 계층 : 데이터 표현 방법에 관련된 기능으로 문자 코딩 규칙, 보안 암호화, 데이터 압축 등 포함 **[JPEG, MPEG, GIF, ASCII]**
7. 7계층 응용(Application) 계층 : 다용한 응용 특성에 관련된 통신 기능으로 몇 가지 기능으로 제한할 수 없음 **[HTTP, FTP, SMTP, POP3, IMRP]**

# 3. TCP/IP 게층 구조

오늘날 산업계의 표준 프로토콜로 사용되고 있는 프로토콜은 TCP/IP 입니다. 인터넷(Internet)에서 사용되는 프로토콜로서 전송 계층에 대응되는 TCP(Transmission Control Protocol)과  
네트워크 계층 상위 부분에 해당하는 IP(Internet Protocol) 프로토콜 근간으로 하여 계층구조를 이룹니다. OSI 7계층 참조 모델의 1,2,3 계층에 대응되는 네트워크 액세스 계층,  
3계층 상위 부분에 해당하는 IP 계층, 4 계층에 해당하는 TCP 계층, 그리고 그 위에 응용 계층이 존재합니다.

## 3.1 네트워크 액세스 계층

인터넷에 연결된 단일 네트워크 내에서 제공하는 네트워크 기능입니다. 즉, 네트워크 내의 한 노드에서 다른 노드로의 메시지 전달 서비스를 담당하는 계층으로 다양한 프로토콜이 대응될 수 있습니다.

## 3.2 IP

IP(Internet Protocol) 계층은 다수의 네트워크들로 이루어진 인터넷에서 한 네트워크에 포함된 송신 노드에서 패킷을 다른 네트워크에 포함된 수신 노드로 전달하는 역할을 합니다.  
미리 경로를 설정하지 않고, 라우터에 의한 목적지로의 전달(forwarding) 기능을 이용하여 데이터그램 방식으로 패킷을 전달합니다. 이를 위해서 네트워크와 네트워크 사이에 연결을 담당하는  
라우터에서 IP 주소를 기반으로 다음 방문할 라우터를 결정해야 합니다. 또한 전달 도중에 패킷에 오류가 방생하면 패킷을 버려야 합니다.

## 3.3 TCP

TCP 계층은 사용자이 응용 계층에게 연결지향 서비스를 제공합니다. 응용 계층으로부터 전달 요구를 받으면 우선 송신 프로세스와 수신프로세스 사이에 논리적인 연결을 설정합니다.  
그 후 연결 상에서 응용 계층으로부터 전송 요청된 메시지를 필요에 따라 전달하기에 용이한 크기의 세그먼트(segment)로 나누어서 IP 계층에게 전달을 요구합니다.

**TCP가 이용하는 IP 계층은 데이터그램 서비스를 제공하는데 이는 오류 제어나 흐름 제어를 하지 않기 떄문에 신뢰성 있는 서비스를 제공하지는 않습니다.**

## 3.4 UDP

TCP와 동일한 계층에 위치하는 프로토콜로 응용 계층에게 비연결 서비스를 제공합니다. 비연결 서비스 이기 때문에 전달하는 메시지들은 각각 독립적으로 처리되며 메시지들의 순서를 보장하지 않습니다.  
그리고 오류가 발생하면 오류 처리를 하지 않고 메시지를 버립니다. 즉 오류 검출에 따른 재전송이나 오류 수정이 없습니다. 결과적으로 IP가 제공하는 데이터 그럼 서비스 이외에 부가적인 기능이 거의 없이  
유사한 서비스를 제공합니다.

**이 서비스를 이용하는 응용 프로토콜로는 SNMP(Simple Network Management Protocol), NFS(Network File System) 등이 있습니다.**
