# 데이터 링크 제어

데이터 링크 제어(data link control)는 한 물리적인 링크를 사이에 두고 이웃한 두 노드 사이에서 신뢰성 있는 프레임 전달 기능을 다룹니다.  
링크를 통한 신뢰성 있는 프레임 전달을 위해서는 데이터 링크 초기화, 프레임 동기화, 흐름 제어와 오류 제어 등의 기능이 요구 됩니다.

# 1. 프레임

네트워크 계층으로부터 전달된 데이터를 수신한 후 데이터 링크 계층에서 약속된 프레임(frame) 형식에 맞추어 메시지를 구성하는 것을  
프레이밍(framing)이라 합니다. 프레임 형식은 프레임의 경계를 나타내는 플래그(flag)와 헤더(header), 사용자 데이터(user data),  
트레일러(trailer) 등으로 이루어 집니다.

프레임 일반적인 형태는 다음과 같다.

[플래그][헤더][사용자 데이터][트레일러][플래그]

# 2. 흐름 제어

송신자와 수신자 사이에 전달되는 데이터의 처리 속도를 송수신자 간에 적절하게 조절해야 합니다.
만약 송신자는 초당 100개의 프레임을 전달하는 데 수신자는 초당 50개의 프레임을 수신 처리한다면  
수신 측에서 초당 50개의 프레임이 처리되지 못하고 버퍼에 쌓이게 될 것입니다.

버퍼가 충분히 가정하더라도 이와 같은 상황이 계속된다면, 얼마 안가서 수신 버퍼는 수신 데이터로 채워지게 되고 결국  
오버플로우가 발생할 수밖에 없습니다. 따라서 정상적인 데이터 전달을 위해서는 송신측이 수신 측의 수신 데이터 처리 속도에 맞추어서 데이터를 송신해야 합니다.

**이와 같은 기능을 흐름 제어(flow control)이라 합니다.**

## 2.1 정지대기 흐름 제어

이 방식에서는 송신 측에서 한 개의 프레임을 전송한 후, 수신 측으로부터 응답(acknowledgement)을 받을 때까지 기다립니다.  
만약 긍정 응답을 받을 경웅에는 다음 프레임을 전송하게 되고, 만약에 부정 응답을 받게 되면, 보낸 프레임을 다시 전송합니다.

## 2.2 슬라이딩 윈도우 흐름 제어

정지대기 흐름 제어의 가장 큰 담점인 처리율을 높이기 위해서 프레임을 전송한 후 응답이 오기를 기다리지 않고 바로 다음 프레임을 전송하는 방식을 의미합니다.  
응답이 오지 않았지만 연속적으로 다음 프레임들을 계속 전송하는 방식입니다.

# 3. 오류 제어

프레임을 전송하는 도중에 오류가 발생하면 수신 측에서는 오류 검출을 한 후에 재전송을 송신 측에 요청하여 오류를 바로잡아야 합니다.  
수신 측에서 오류 검출이 되었을 때 부정 응답을 하여 재전송을 요구할 수 있지만, 부정 응답을 하지 않고 송신 측에서 응답을 기다리다 타임 아웃이  
발생하면 자동으로 재정송을 하여 오류 제어를 하기도 합니다.

이와 같은 재전송에 의한 오류 제어를 ARQ(Automatic Retransmission reQuest)라 합니다. 정지대기 흐름 제어를 이용하는 경우의 재전송  
오류 제어는 정지 대기(stop and wait) ARQ라 하고, 슬라이딩 윈도우 흐름 제어를 사용하는 경우에는 N-후퇴(go-back-N) ARQ와 선택적 재전송(selective repeat) ARQ가 있습니다.
